"use strict";(self.webpackChunkVariationCrossSelling=self.webpackChunkVariationCrossSelling||[]).push([[1],{1512:function(t,e,a){a.r(e),a.d(e,{default:function(){return i}});var s=function(){var t=this,e=t._self._c;return t.currentCrossSeller.length>0?e("div",{staticClass:"widget widget-filter-base"},[e("div",{staticClass:"crosslist"},[!0===t.showheadline?[e("div",{staticClass:"h3 mb-3"},[t._v("\n        "+t._s(t.$translate("VariationCrossSelling::Template.translateAddonItemsHeadline"))+"\n      ")])]:t._e(),t._v(" "),e("ul",{staticClass:"list-unstyled",attrs:{id:"single-crosslist"}},t._l(t.currentCrossSeller,(function(a){return e("li",{staticClass:"mb-1"},[a.data&&a.data.variation&&a.data.variation.id>0?[e("label",{staticClass:"cursor d-flex align-items-center mb-0",attrs:{for:"var_"+a.data.variation.id}},[e("div",{staticClass:"d-flex flex-fill"},[a.data.images.variation&&a.data.images.variation.length>0?[e("div",[e("img",{staticClass:"img-fluid mx-4 my-2",staticStyle:{height:"70px"},attrs:{src:a.data.images.variation[0].urlPreview,alt:a.data.texts.name1}})])]:a.data.images.all&&a.data.images.all.length>0?[e("div",[e("img",{staticClass:"img-fluid mx-4 my-2",staticStyle:{height:"70px"},attrs:{src:a.data.images.all[0].urlPreview,alt:a.data.texts.name1}})])]:[e("div",{staticClass:"mr-3",staticStyle:{height:"70px",width:"70px"}})],t._v(" "),e("div",{staticClass:"flex-fill my-2"},[e("div",{staticClass:"crosslisttitle"},[e("a",{attrs:{href:t._f("itemURL")(a.data)}},[e("b",[t._v(t._s(a.data.texts.name1))])])]),t._v(" "),e("div",{staticClass:"crosslistadditional"},[e("div",{staticClass:"d-flex"},[e("div",[e("span",{staticClass:"vat small text-muted"},[t._v("\n                           "+t._s(a.data.prices.default.price.formatted)+"\n                      ")])])])])]),t._v(" "),e("div",{staticClass:"crossSellerAddToCartBtnWrapper"},[e("button",{staticClass:"btn btn-primary btn-appearance",class:{crossSellerAddToCartBtnRounded:1==t.roundedbtns},attrs:{disabled:t.addItemToBasketLoading},on:{click:function(e){return t.addItemToBasket([a])}}},[1==t.addItemToBasketLoading?[e("i",{staticClass:"fa fa-refresh fa-spin",attrs:{"aria-hidden":"true"}})]:[e("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}})]],2)])],2)])]:t._e()],2)})),0)],2)]):t._e()};s._withStripped=!0;var r=function(t,e,a,s,r,i,n,l){var o,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=a,d._compiled=!0),s&&(d.functional=!0),i&&(d._scopeId="data-v-"+i),n?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=o):r&&(o=l?function(){r.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:r),o)if(d.functional){d._injectStyles=o;var c=d.render;d.render=function(t,e){return o.call(e),c(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,o):[o]}return{exports:t,options:d}}({name:"variationcrossselling",props:{showheadline:{type:Boolean,default:function(){return!1}},roundedbtns:{type:Boolean,default:function(){return!1}},crossseller:{type:Array,default:function(){return[]}}},inject:{itemId:{default:null}},data:function(){return{addItemToBasketLoading:!1,currentCrossSeller:[]}},computed:{currentVariation:function(){return this.$store.getters["".concat(this.itemId,"/currentItemVariation")]}},created:function(){this.currentCrossSeller=this.crossseller,console.log("created this.crossseller",this.currentCrossSeller)},watch:{currentVariation:{handler:function(t){this.getCurrentCrossSeller(t.variation.id)}}},methods:{getCurrentCrossSeller:function(t){var e=this;$.ajax({type:"get",url:"/variationCrossSeller/getCrossSellerForVar/"+t+"/"+App.language+"/1",success:function(t){1==t.success&&(e.currentCrossSeller=t.vars)},error:function(t,e,a){console.log(t)}})},addItemToBasket:function(t){var e=[],a=this;a.addItemToBasketLoading=!0;for(var s=0;s<t.length;s++){var r=t[s].data.variation.intervalOrderQuantity;null!=r&&null!=r||(r=1),e.push({variationId:t[s].id,quantity:r})}var i={items:e};$.ajax({type:"POST",url:"/variationCrossSeller/frontend/addToBasket/",data:i,success:function(t){for(var e=0;e<t.length;e++){if(t[e].error){for(var s=t[e].error.variationName,r=0;r<a.currentCrossSeller;r++)a.currentCrossSeller[r].data.variation.id==error.placeholder.variationId&&(s=a.currentCrossSeller[r].data.texts.name1);CeresNotification.error(ceresTranslate("VariationCrossSelling::Template.translateNotEnoughStock",{variationName:s,stock:t[e].error.placeholder.stock}))}else CeresNotification.success(ceresTranslate("VariationCrossSelling::Template.translateAddedToBasketSuccess")).closeAfter(3e3);e===t.length-1&&(vueApp.$store.commit("setBasketItems",t[e].basketItems),vueApp.$store.commit("setBasket",t[e].basket))}a.addItemToBasketLoading=!1},error:function(t,e,s){a.addItemToBasketLoading=!1}})}}},s,[],!1,null,null,null),i=r.exports}}]);
//# sourceMappingURL=VariationCrossSelling-1.min.js.map